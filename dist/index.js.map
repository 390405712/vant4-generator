{"version":3,"file":"index.js","sources":["../lib/FormGenerator.tsx","../lib/utils.ts"],"sourcesContent":["import { Form, CellGroup, Button, Field, Calendar, Cascader, Popup, Checkbox, CheckboxGroup, Radio, RadioGroup, Switch, Picker, DatePicker, TimePicker, Stepper, Uploader } from 'vant'\r\nimport { defineComponent, ref } from 'vue'\r\nimport type { Ref } from 'vue'\r\nimport type { FormAttrs, FormOption, CheckboxGroup as CheckboxGroupType, RadioGroup as RadioGroupType } from './type'\r\nimport type { Expose } from './vant'\r\nimport type { DatePickerColumnType } from 'vant/lib/date-picker/DatePicker.d'\r\nimport type { CascaderOption } from 'vant/lib/cascader/types'\r\n\r\nexport default defineComponent({\r\n  name: 'FormGenerator',\r\n  setup(props, { expose, attrs, slots, emit }) {\r\n    const _attrs = attrs as FormAttrs\r\n    const RefFormGenerator = ref()\r\n    const $refs: Record<string, Ref<Expose | undefined>> = {}\r\n    expose(() => ({ ...RefFormGenerator.value, $refs }))\r\n    return () => {\r\n      function renderForm() {\r\n        return (\r\n          <Form class={`FormGenerator`} {..._attrs} ref={RefFormGenerator} >\r\n            <CellGroup>\r\n              {_attrs.formOption.map((formOption) => {\r\n                if (!(formOption.hasOwnProperty('show') && formOption.show === false)) return renderControl(formOption)\r\n              })}\r\n              {_attrs.disabled === true || !_attrs.onSubmit\r\n                ? ''\r\n                : slots?.default\r\n                  ? <>{slots.default()[0].children}</>\r\n                  : <Button block type=\"primary\" native-type=\"submit\">提交</Button>\r\n              }\r\n            </CellGroup>\r\n          </Form >\r\n        )\r\n      }\r\n      function renderField(formOption: FormOption & { showPopup?: boolean }, custom?: boolean) {\r\n        let model = custom ? formOption.formItem.text : _attrs.model[formOption.formItem.name]\r\n        return <Field is-link readonly onClick={_attrs.disabled ? () => '' : () => { formOption.showPopup = true }} inputAlign='right' v-model={model} v-slots={{ ...formOption?.formItem?.slots }} {...formOption.formItem} />\r\n      }\r\n      function renderControl(formOption: FormOption) {\r\n        $refs[formOption.formItem.name] = ref()\r\n        switch (formOption.type) {\r\n          case 'field':\r\n            return <Field ref={$refs[formOption.formItem.name]} inputAlign='right' v-model={_attrs.model[formOption.formItem.name]} {...formOption.formItem} {...formOption.control} v-slots={{ ...formOption?.control?.slots }} />\r\n            break;\r\n          case 'checkbox':\r\n            return <Field inputAlign='right' {...formOption.formItem} v-slots={{\r\n              input: () => (\r\n                <CheckboxGroup ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} direction=\"horizontal\" v-model={_attrs.model[formOption.formItem.name]} {...formOption?.control} >\r\n                  {(formOption.control.checkboxGroup as CheckboxGroupType).map((controlOptionItem) => (\r\n                    <Checkbox  {...controlOptionItem} name={controlOptionItem.value} v-slots={{ ...controlOptionItem?.slots }} >{controlOptionItem.label}</Checkbox>\r\n                  ))}\r\n                </CheckboxGroup>\r\n              )\r\n            }}>\r\n            </Field>\r\n            break;\r\n          case 'radio':\r\n            return <Field inputAlign='right' {...formOption.formItem} v-slots={{\r\n              input: () => (\r\n                <RadioGroup ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} direction=\"horizontal\" v-model={_attrs.model[formOption.formItem.name]} {...formOption?.control} >\r\n                  {(formOption.control.radioGroup as RadioGroupType).map((controlOptionItem) => (\r\n                    <Radio name={controlOptionItem.value} v-slots={{ ...controlOptionItem?.slots }} {...controlOptionItem}>{controlOptionItem.label}</Radio>\r\n                  ))}\r\n                </RadioGroup>\r\n              )\r\n            }}>\r\n            </Field>\r\n            break;\r\n          case 'switch':\r\n            return <Field class=\"field-switch\" readonly v-slots={{\r\n              'right-icon': () => (\r\n                <Switch ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} size=\"24px\" modelValue={_attrs.model[formOption.formItem.name]} onUpdate:modelValue={(val) => { _attrs.model[formOption.formItem.name] = val }} {...formOption?.control} v-slots={{ ...formOption?.control?.slots }} />\r\n              )\r\n            }} {...formOption.formItem} >\r\n            </Field>\r\n            break;\r\n          case 'uploader':\r\n            return <Field readonly inputAlign='right' v-slots={{\r\n              'input': () => (\r\n                <Uploader ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} v-model={_attrs.model[formOption.formItem.name]} {...formOption?.control} v-slots={{ ...formOption?.control?.slots }} />\r\n              )\r\n            }} {...formOption.formItem} >\r\n            </Field>\r\n            break;\r\n          case 'stepper':\r\n            return <Field readonly v-slots={{\r\n              'right-icon': () => (\r\n                <Stepper ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} button-size=\"21px\" v-model={_attrs.model[formOption.formItem.name]} {...formOption?.control} />\r\n              )\r\n            }} {...formOption.formItem} >\r\n            </Field>\r\n            break;\r\n          case 'picker':\r\n            return <>\r\n              {renderField(formOption, true)}\r\n              <Popup v-model={[formOption.showPopup, 'show', ['']]} round position=\"bottom\" {...formOption.popup}>\r\n                <Picker ref={$refs[formOption.formItem.name]}\r\n                  onCancel={() => { formOption.showPopup = false }}\r\n                  onConfirm={(scope: { selectedOptions: Record<string, any>[], selectedValues: Record<string, any>[] }) => {\r\n                    formOption.showPopup = false;\r\n                    _attrs.model[formOption.formItem.name] = Array.isArray(scope.selectedValues) && scope.selectedValues.length === 1 ? scope.selectedValues[0] : scope.selectedValues;\r\n                    formOption.formItem.text = scope.selectedOptions.map((item) => typeof item === 'object' ? item?.[formOption?.control?.columnsFieldNames?.text ?? 'text'] : item).join('/');\r\n                  }}\r\n                  v-slots={{ ...formOption?.control?.slots }}\r\n                  {...formOption.control}\r\n                />\r\n              </Popup>\r\n            </>\r\n            break;\r\n          case 'datePicker':\r\n            return <>\r\n              {renderField(formOption)}\r\n              <Popup v-model={[formOption.showPopup, 'show', ['']]} round position=\"bottom\" {...formOption.popup}>\r\n                <DatePicker ref={$refs[formOption.formItem.name]}\r\n                  onCancel={() => { formOption.showPopup = false }}\r\n                  onConfirm={(scope: { selectedValues: string[], selectedOptions: { text: string, value: string }[], columnIndex: number, selectedIndexes: number[] }) => {\r\n                    _attrs.model[formOption.formItem.name] = scope.selectedValues.join('-')\r\n                    formOption.showPopup = false;\r\n                  }}\r\n                  v-slots={{ ...formOption?.control?.slots }}\r\n                  {...formOption.control}\r\n                />\r\n              </Popup>\r\n            </>\r\n            break;\r\n          case 'timePicker':\r\n            return <>\r\n              {renderField(formOption)}\r\n              <Popup v-model={[formOption.showPopup, 'show', ['']]} round position=\"bottom\" {...formOption.popup}>\r\n                <TimePicker ref={$refs[formOption.formItem.name]}\r\n                  onCancel={() => { formOption.showPopup = false }}\r\n                  onConfirm={(scope: { selectedValues: string[], selectedOptions: { text: string, value: string }[], columnIndex: number, selectedIndexes: number[] }) => {\r\n                    _attrs.model[formOption.formItem.name] = scope.selectedValues.join(':')\r\n                    formOption.showPopup = false;\r\n                  }}\r\n                  v-slots={{ ...formOption?.control?.slots }}\r\n                  {...formOption.control}\r\n                />\r\n              </Popup>\r\n            </>\r\n            break;\r\n          case 'calendar':\r\n            return <>\r\n              {renderField(formOption, formOption?.control?.type === 'multiple')}\r\n              <Calendar ref={$refs[formOption.formItem.name]} v-model={[formOption.showPopup, 'show', ['']]}\r\n                show-confirm={formOption?.control?.type === 'multiple'}\r\n                onConfirm={(value) => {\r\n                  formOption.showPopup = false;\r\n                  const formatDate = (date: Date) => `${date?.getFullYear?.()}-${String(date?.getMonth?.() + 1).padStart(2, '0')}-${String(date?.getDate?.()).padStart(2, '0')}`\r\n                  switch (formOption?.control?.type) {\r\n                    case 'multiple':\r\n                      _attrs.model[formOption.formItem.name] = value.reduce((arr: string[], item: Date) => {\r\n                        arr.push(formatDate(item))\r\n                        return arr\r\n                      }, [])\r\n                      formOption.formItem.text = `选择了 ${value.length} 个日期`\r\n                      break;\r\n                    case 'range':\r\n                      _attrs.model[formOption.formItem.name] = [formatDate(value[0]), formatDate(value[1])]\r\n                      formOption.formItem.text = `${formatDate(value[0])}~${formatDate(value[1])}`\r\n                      break;\r\n                    default:\r\n                      _attrs.model[formOption.formItem.name] = formatDate(value)\r\n                      break;\r\n                  }\r\n                }}\r\n                v-slots={{ ...formOption?.control?.slots }}\r\n                {...formOption.control}\r\n              />\r\n            </>\r\n            break;\r\n          case 'cascader':\r\n            return <>\r\n              {renderField(formOption, true)}\r\n              <Popup v-model={[formOption.showPopup, 'show', ['']]} round position=\"bottom\" {...formOption.popup}>\r\n                <Cascader ref={$refs[formOption.formItem.name]} v-model={_attrs.model[formOption.formItem.name]}\r\n                  onClose={() => { formOption.showPopup = false }}\r\n                  onFinish={(scope: { value: string | number, selectedOptions: CascaderOption[] }) => {\r\n                    formOption.showPopup = false;\r\n                    _attrs.model[formOption.formItem.name] = scope.value;\r\n                    formOption.formItem.text = scope.selectedOptions.map((item) => item[formOption?.control?.fieldNames?.text ?? 'text']).join('/');\r\n                  }}\r\n                  v-slots={{ ...formOption?.control?.slots }}\r\n                  {...formOption.control}\r\n                />\r\n              </Popup>\r\n            </>\r\n            break;\r\n          case 'slot':\r\n            return <Field readonly inputAlign='right' v-slots={{\r\n              label: () => formOption.formItem.label ?? '',\r\n              ...formOption?.control?.slots,\r\n              input: () => {\r\n                if (formOption?.control?.slots?.input && typeof formOption?.control?.slots?.input === 'function') return <>{formOption?.control?.slots?.input?.({ form: _attrs.model, data: _attrs.model[formOption.formItem.name] })}</>\r\n                if (slots[formOption.formItem.name]) return <>{slots[formOption.formItem.name]?.({ form: _attrs.model, data: _attrs.model[formOption.formItem.name] })}</>\r\n                return _attrs.model[formOption.formItem.name]\r\n              },\r\n            }}\r\n              {...formOption.formItem} />\r\n            break;\r\n        }\r\n      };\r\n      return (\r\n        renderForm()\r\n      )\r\n    }\r\n  },\r\n})","import type { FormRules } from 'element-plus'\r\nimport type { FormOption } from './type'\r\nimport type { FieldRule } from 'vant';\r\n\r\ntype option = {\r\n  label: string\r\n  value: string,\r\n}\r\n/**\r\n * @description: 将对象数组转为控件所支持的字段\r\n * @param arr 原始list\r\n * @param label 赋值label的key名\r\n * @param value 赋值value的key名\r\n * @param custom 自定义需要合并的对象\r\n */\r\nexport const getOption = (arr: Record<string, string>[] | string[], label: string, value: string, custom?: {}): option[] => {\r\n  if (!Array.isArray(arr)) return []\r\n  const options: option[] = []\r\n  let customKeys: string[] = []\r\n  if (custom) customKeys = Object.keys(custom)\r\n  arr.forEach((item) => {\r\n    let params: option & Record<string, string> = {\r\n      label: typeof item === 'string' ? item : item[label],\r\n      value: typeof item === 'string' ? item : item[value]\r\n    }\r\n    if (custom) {\r\n      customKeys.forEach((key) => {\r\n        params[key] = (item as Record<string, string>)[key]\r\n      })\r\n    }\r\n    options.push(params)\r\n  })\r\n  return options\r\n}\r\n\r\n/**\r\n * @description: 生成校验配置\r\n * @param formOption 表单配置 FormOption[]\r\n * @param omit 不需要验证的key  string[]\r\n * @return formOption\r\n */\r\nexport const setRequired = (formOption: FormOption[], omit: string[] = []): FormOption[] => {\r\n  const type = {\r\n    'field': '输入',\r\n    'stepper': '输入',\r\n    'picker': '选择',\r\n    'radio': '选择',\r\n    'checkbox': '选择',\r\n    'switch': '选择',\r\n    'datetimePicker': '选择',\r\n    'calendar': '选择',\r\n    'cascader': '选择',\r\n    'uploader': '上传',\r\n    'slot': '',\r\n  }\r\n  formOption.forEach((i) => {\r\n    const FieldRule: FieldRule = { required: true, message: `请${(type[i.type] || '完善')}${i.formItem.label || ''}`, trigger: 'onChange' }\r\n    if (!omit.includes(i.formItem.name)) {\r\n      i.formItem.required = true\r\n      if (!['stepper', 'switch'].includes(i.type)) {\r\n        if (!i.formItem.rules) {\r\n          i.formItem.rules = [FieldRule]\r\n        } else {\r\n          i.formItem.rules.unshift(FieldRule)\r\n        }\r\n        for (let index = 0; index < i.formItem.rules.length; index++) {\r\n          let item = i.formItem.rules[index]\r\n          if (!item.message) item.message = '格式有误'\r\n        }\r\n      }\r\n    }\r\n  })\r\n  return formOption\r\n}"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","defineComponent","name","setup","props","expose","attrs","slots","emit","_attrs","RefFormGenerator","ref","$refs","value","renderForm","_createVNode","Form","_mergeProps","default","CellGroup","formOption","map","hasOwnProperty","show","renderControl","disabled","onSubmit","_Fragment","children","Button","_createTextVNode","renderField","custom","model","formItem","text","Field","showPopup","$event","type","control","input","_slot","CheckboxGroup","checkboxGroup","controlOptionItem","Checkbox","label","_slot2","RadioGroup","radioGroup","Radio","right-icon","Switch","val","Uploader","Stepper","Popup","popup","Picker","onCancel","scope","Array","isArray","selectedValues","length","selectedOptions","item","columnsFieldNames","join","DatePicker","TimePicker","Calendar","formatDate","date","getFullYear","String","getMonth","padStart","getDate","reduce","arr","push","Cascader","onClose","fieldNames","form","data","getOption","options","customKeys","params","key","setRequired","omit","i","FieldRule","index"],"mappings":"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"}